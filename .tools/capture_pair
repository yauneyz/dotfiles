#!/usr/bin/env bash
# capture_pair.sh
# Usage: ./capture_pair.sh <name> <variable>
# Example: ./capture_pair.sh Ship 001

set -euo pipefail

# grim doesn't need a cursor flag (cursors are hidden by default on Wayland)
GRIM_CURSOR_FLAG=""
COMPLETE_GEOM="1821,602 522x577"
SCRAMBLE_GEOM="2343,606 506x585"

# --- OUTPUT LAYOUT ---
NAME="${1:-}"
VAR="${2:-}"

if [[ -z "${NAME}" || -z "${VAR}" ]]; then
  echo "Usage: $0 <name> <variable>"
  echo "Example: $0 Ship 001"
  exit 1
fi

# Output directory (per your project structure)
OUTDIR="${HOME}/development/Lando/lando-video/${NAME}"
mkdir -p "${OUTDIR}"

SCRAMBLE_OUT="${OUTDIR}/scramble-${NAME}-${VAR}.png"
COMPLETE_OUT="${OUTDIR}/complete-${NAME}-${VAR}.png"

# --- CHECKS ---
command -v grim >/dev/null 2>&1 || { echo "Error: grim not found. Install it first."; exit 1; }

# --- CAPTURE ---
echo "Capturing scramble -> ${SCRAMBLE_OUT}"
grim -g "${SCRAMBLE_GEOM}" "${SCRAMBLE_OUT}"

echo "Capturing complete  -> ${COMPLETE_OUT}"
grim -g "${COMPLETE_GEOM}" "${COMPLETE_OUT}"

echo "Done."
