#!/usr/bin/env bash
# capture_pair.sh
# Usage: ./capture_pair.sh <name> <variable>
# Example: ./capture_pair.sh Ship 001

set -euo pipefail

# --- CONFIG: set your fixed rectangles here (WIDTHxHEIGHT+X+Y) ---
SCRAMBLE_GEOM="646x712+2650+889"   # e.g. Left 2313 Top 486 Width 971 Height 815
COMPLETE_GEOM="624x704+3294+897"    # change this to your second rectangle

# Hide mouse cursor in screenshots (set to "" to keep cursor)
MAIM_CURSOR_FLAG="-u"

# --- OUTPUT LAYOUT ---
NAME="${1:-}"
VAR="${2:-}"

if [[ -z "${NAME}" || -z "${VAR}" ]]; then
  echo "Usage: $0 <name> <variable>"
  echo "Example: $0 Ship 001"
  exit 1
fi

# Output directory (per your project structure)
OUTDIR="${HOME}/development/Lando/lando-video/${NAME}"
mkdir -p "${OUTDIR}"

SCRAMBLE_OUT="${OUTDIR}/scramble-${NAME}-${VAR}.png"
COMPLETE_OUT="${OUTDIR}/complete-${NAME}-${VAR}.png"

# --- CHECKS ---
command -v maim >/dev/null 2>&1 || { echo "Error: maim not found. Install it first."; exit 1; }

# --- CAPTURE ---
echo "Capturing scramble -> ${SCRAMBLE_OUT}"
maim ${MAIM_CURSOR_FLAG} -g "${SCRAMBLE_GEOM}" "${SCRAMBLE_OUT}"

echo "Capturing complete  -> ${COMPLETE_OUT}"
maim ${MAIM_CURSOR_FLAG} -g "${COMPLETE_GEOM}" "${COMPLETE_OUT}"

echo "Done."
